<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Manual for Developing a DAW-Controller: Software Demo Projects: Header</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mdw_Logo_weiss.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">Manual for Developing a DAW-Controller: Software Demo Projects<span id="projectnumber">&#160;Demo Project</span>
   </div>
   <div id="projectbrief">This is the software module that contains demo projects for the deploma thesis: &quot;Handbuch zur Entwicklung eines DAW-Controllers&quot; (Eng: Manual for Developing a DAW-Controller).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group___rotary_encoder___header.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle"><div class="title">Header<div class="ingroups"><a class="el" href="group___rotary_encoder.html">Rotary Encoder</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Study this part for a quick overview of this module.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:_rotary_encoder_8h" id="r__rotary_encoder_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rotary_encoder_8h.html">RotaryEncoder.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaee17a2289e35e375fd1252fcf599c929" id="r_gaee17a2289e35e375fd1252fcf599c929"><td class="memItemLeft" align="right" valign="top"><a id="gaee17a2289e35e375fd1252fcf599c929" name="gaee17a2289e35e375fd1252fcf599c929"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>ENC_enum_Td</b> { <br />
&#160;&#160;<b>ENC_TICK_LEFT</b> = 0x10
, <b>ENC_TICK_RIGHT</b> = 0x11
, <b>ENC_NO_TICK</b> = 0x1F
, <b>ENCODER_INTERRUPT_A</b> = 0x20
, <br />
&#160;&#160;<b>ENCODER_INTERRUPT_B</b> = 0x21
, <b>ENCODER_INTERRUPT_A_SCHEDULED</b> = 0x22
, <b>ENCODER_INTERRUPT_B_SCHEDULED</b> = 0x23
, <b>ENCODER_NO_INTERRUPT</b> = 0x2F
<br />
 }</td></tr>
<tr class="separator:gaee17a2289e35e375fd1252fcf599c929"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Initialize</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Use these functions to initialize the Rotary Encoder. </p>
</td></tr>
<tr class="memitem:ga7a39ef89b3374234746dd99a56464e7b" id="r_ga7a39ef89b3374234746dd99a56464e7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7a39ef89b3374234746dd99a56464e7b">Encoder_init_PinA</a> (<a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *ENC, GPIO_TypeDef *Port, uint16_t Pin)</td></tr>
<tr class="memdesc:ga7a39ef89b3374234746dd99a56464e7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link Pin A of the rotary encoder to the internal module.  <br /></td></tr>
<tr class="separator:ga7a39ef89b3374234746dd99a56464e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf05177953320ff310cc5f5004e0aefb8" id="r_gaf05177953320ff310cc5f5004e0aefb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf05177953320ff310cc5f5004e0aefb8">Encoder_init_PinB</a> (<a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *ENC, GPIO_TypeDef *Port, uint16_t Pin)</td></tr>
<tr class="memdesc:gaf05177953320ff310cc5f5004e0aefb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Link Pin B of the rotary encoder to the internal module.  <br /></td></tr>
<tr class="separator:gaf05177953320ff310cc5f5004e0aefb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga995d48d3b7b62765ec044a42fc4f793f" id="r_ga995d48d3b7b62765ec044a42fc4f793f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga995d48d3b7b62765ec044a42fc4f793f">Encoder_init_DebounceTimeInMs</a> (<a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *ENC, uint16_t Time)</td></tr>
<tr class="memdesc:ga995d48d3b7b62765ec044a42fc4f793f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the debounce time for Pins A and B. This time depends on the used encoder (see datasheet) and the debounce cirquit.  <br /></td></tr>
<tr class="separator:ga995d48d3b7b62765ec044a42fc4f793f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Process</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Use these functions to process the Rotary Encoder. </p>
</td></tr>
<tr class="memitem:gab9cb7c1cf7378a564c29698f742bf651" id="r_gab9cb7c1cf7378a564c29698f742bf651"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab9cb7c1cf7378a564c29698f742bf651">Encoder_update</a> (<a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *ENC)</td></tr>
<tr class="memdesc:gab9cb7c1cf7378a564c29698f742bf651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this function periodically in while loop to update the state of the rotary encoder.  <br /></td></tr>
<tr class="separator:gab9cb7c1cf7378a564c29698f742bf651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga78e72273035ec42820d7cf4c02bab210" id="r_ga78e72273035ec42820d7cf4c02bab210"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga78e72273035ec42820d7cf4c02bab210">Encoder_manage_Interrupt</a> (<a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *ENC, uint16_t GPIO_Pin)</td></tr>
<tr class="memdesc:ga78e72273035ec42820d7cf4c02bab210"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this function in the HAL interrupt handler. Here an example:  <br /></td></tr>
<tr class="separator:ga78e72273035ec42820d7cf4c02bab210"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Interact</h2></td></tr>
<tr><td class="ititle" colspan="2"><p>Use these functions to interact with the module </p>
</td></tr>
<tr class="memitem:ga782652e2ad3a841104182d62f100ebda" id="r_ga782652e2ad3a841104182d62f100ebda"><td class="memItemLeft" align="right" valign="top">ENC_enum_Td&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga782652e2ad3a841104182d62f100ebda">Encoder_get_Tick</a> (<a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *ENC)</td></tr>
<tr class="memdesc:ga782652e2ad3a841104182d62f100ebda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this function to get the direction of the rotary encoder. To avoid missing ticks, it is recommended to call this function after each Encoder update.  <br /></td></tr>
<tr class="separator:ga782652e2ad3a841104182d62f100ebda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Study this part for a quick overview of this module. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga782652e2ad3a841104182d62f100ebda" name="ga782652e2ad3a841104182d62f100ebda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga782652e2ad3a841104182d62f100ebda">&#9670;&#160;</a></span>Encoder_get_Tick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ENC_enum_Td Encoder_get_Tick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>ENC</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call this function to get the direction of the rotary encoder. To avoid missing ticks, it is recommended to call this function after each Encoder update. </p>
<dl class="section note"><dt>Note</dt><dd>A Tick in a specific direction means, that the Encoder was rotated in one direction. It is up to the user, how to interpret these ticks in terms of speed or error correction if the encoder gets turned very quick.</dd></dl>
<p>ENC pointer to the users rotary encoder data structure </p><dl class="section return"><dt>Returns</dt><dd>ENC_TICK_LEFT, ENC_TICK_RIGHT or ENC_NO_TICK </dd></dl>

</div>
</div>
<a id="ga995d48d3b7b62765ec044a42fc4f793f" name="ga995d48d3b7b62765ec044a42fc4f793f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga995d48d3b7b62765ec044a42fc4f793f">&#9670;&#160;</a></span>Encoder_init_DebounceTimeInMs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder_init_DebounceTimeInMs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>ENC</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>Time</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the debounce time for Pins A and B. This time depends on the used encoder (see datasheet) and the debounce cirquit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ENC</td><td>pointer to the users rotary encoder data structure </td></tr>
    <tr><td class="paramname">Time</td><td>debounce time in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="ga7a39ef89b3374234746dd99a56464e7b" name="ga7a39ef89b3374234746dd99a56464e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a39ef89b3374234746dd99a56464e7b">&#9670;&#160;</a></span>Encoder_init_PinA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder_init_PinA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>ENC</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GPIO_TypeDef *</td>          <td class="paramname"><span class="paramname"><em>Port</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>Pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link Pin A of the rotary encoder to the internal module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ENC</td><td>pointer to the users rotary encoder data structure </td></tr>
    <tr><td class="paramname">Port</td><td>used for rotary encoder Pin A </td></tr>
    <tr><td class="paramname">Pin</td><td>used for rotary encoder Pin A </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="gaf05177953320ff310cc5f5004e0aefb8" name="gaf05177953320ff310cc5f5004e0aefb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf05177953320ff310cc5f5004e0aefb8">&#9670;&#160;</a></span>Encoder_init_PinB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder_init_PinB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>ENC</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GPIO_TypeDef *</td>          <td class="paramname"><span class="paramname"><em>Port</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>Pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Link Pin B of the rotary encoder to the internal module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ENC</td><td>pointer to the users rotary encoder data structure </td></tr>
    <tr><td class="paramname">Port</td><td>used for rotary encoder Pin B </td></tr>
    <tr><td class="paramname">Pin</td><td>used for rotary encoder Pin B </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="ga78e72273035ec42820d7cf4c02bab210" name="ga78e72273035ec42820d7cf4c02bab210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78e72273035ec42820d7cf4c02bab210">&#9670;&#160;</a></span>Encoder_manage_Interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder_manage_Interrupt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>ENC</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>GPIO_Pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call this function in the HAL interrupt handler. Here an example: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)</div>
<div class="line">{</div>
<div class="line">  <a class="code hl_function" href="#ga78e72273035ec42820d7cf4c02bab210">Encoder_manage_Interrupt</a>(&amp;Encoder, GPIO_Pin);</div>
<div class="line">}</div>
<div class="ttc" id="agroup___rotary_encoder___header_html_ga78e72273035ec42820d7cf4c02bab210"><div class="ttname"><a href="#ga78e72273035ec42820d7cf4c02bab210">Encoder_manage_Interrupt</a></div><div class="ttdeci">void Encoder_manage_Interrupt(ENC_TypeDef *ENC, uint16_t GPIO_Pin)</div><div class="ttdoc">Call this function in the HAL interrupt handler. Here an example:</div><div class="ttdef"><b>Definition</b> RotaryEncoder.c:260</div></div>
</div><!-- fragment --><p>ENC pointer to the users rotary encoder data structure</p>
<p>GPIO_Pin interrupted Pin </p><dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<a id="gab9cb7c1cf7378a564c29698f742bf651" name="gab9cb7c1cf7378a564c29698f742bf651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9cb7c1cf7378a564c29698f742bf651">&#9670;&#160;</a></span>Encoder_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Encoder_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_e_n_c___type_def.html">ENC_TypeDef</a> *</td>          <td class="paramname"><span class="paramname"><em>ENC</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call this function periodically in while loop to update the state of the rotary encoder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ENC</td><td>pointer to the users rotary encoder data structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>
<p>- If Pin A is interrupted:</p><ul>
<li>Set Interrupt state to scheduled for next cycle</li>
<li>Start debounce timer</li>
</ul>
<p>- If Pin A is scheduled for processing:</p><ul>
<li>If timer is elapsed:<ul>
<li>Reset Interrupt</li>
<li>Process Pins to get tick direction</li>
</ul>
</li>
</ul>
<p>- If Pin B is interrupted:</p><ul>
<li>Set Interrupt state to scheduled for next cycle</li>
<li>Start debounce timer</li>
</ul>
<p>- If Pin B is scheduled for processing:</p><ul>
<li>If timer is elapsed:<ul>
<li>Reset Interrupt</li>
<li>Process Pins to get tick direction</li>
</ul>
</li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
